---
apiVersion: kuttl.dev/v1beta1
kind: TestAssert
---
apiVersion: exoscale.crossplane.io/v1
kind: IAMKey
metadata:
  annotations:
    crossplane.io/external-name: iam-key-kuttl-test
    kuttl: '00-install'
  finalizers:
    - finalizer.managedresource.crossplane.io
  name: iam-key-kuttl-test
spec:
  deletionPolicy: Delete
  forProvider:
    keyName: iam-key-kuttl-test
    services:
      sos:
        buckets:
          - bucket.test.e2e
    zone: CH-DK-2
  providerConfigRef:
    name: provider-config
  writeConnectionSecretToRef:
    name: exoscale-user-credentials-kuttl-test
    namespace: e2e-test
status:
  atProvider:
    keyName: iam-key-kuttl-test
    services:
      sos:
        buckets:
          - bucket.test.e2e
  conditions:
    - type: Ready
      status: "True"
      reason: Available
    - type: Synced
      status: "True"
      reason: ReconcileSuccess
---
apiVersion: v1
kind: Secret
metadata:
  labels:
    app.kubernetes.io/created-by: controller-iamkey
    app.kubernetes.io/instance: iam-key-kuttl-test
    app.kubernetes.io/managed-by: exoscale.crossplane.io
  name: exoscale-user-credentials-kuttl-test
  namespace: e2e-test
  ownerReferences:
    - apiVersion: exoscale.crossplane.io/v1
      kind: IAMKey
      name: iam-key-kuttl-test
type: connection.crossplane.io/v1alpha1

